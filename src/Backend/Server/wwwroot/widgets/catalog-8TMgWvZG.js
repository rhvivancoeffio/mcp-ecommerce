import{j as e,r as l,R as X,a as Q,b as ye}from"./client-Nn7TrOfv.js";import{u as we}from"./useWidgetProps-C6XLaI11.js";import{u as Ne,a as Ce,b as Me}from"./useDisplayMode-CEOUkdr0.js";function ae(t){var r,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(n=ae(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function D(){for(var t,r,n=0,a="",i=arguments.length;n<i;n++)(t=arguments[n])&&(r=ae(t))&&(a&&(a+=" "),a+=r);return a}const Ae="_EmptyMessage_1r5gu_1",Te="_IconBadge_1r5gu_16",Se="_Title_1r5gu_54",Ie="_Description_1r5gu_69",Le="_ActionRow_1r5gu_77",q={EmptyMessage:Ae,IconBadge:Te,Title:Se,Description:Ie,ActionRow:Le},E=({children:t,className:r,fill:n="static"})=>e.jsx("div",{className:D(q.EmptyMessage,r),"data-fill":n,children:t}),$e=({size:t="md",color:r="secondary",children:n,className:a})=>e.jsx("div",{className:D(q.IconBadge,a),"data-size":t,"data-color":r,children:n}),Ee=({children:t,className:r,color:n="secondary"})=>e.jsx("div",{className:D(q.Title,r),"data-color":n,children:t}),Re=({children:t,className:r})=>e.jsx("div",{className:D(q.Description,r),children:t}),Be=({children:t,className:r})=>e.jsx("div",{className:D(q.ActionRow,r),children:t});E.Icon=$e;E.Title=Ee;E.Description=Re;E.ActionRow=Be;const re=({images:t,alt:r,className:n="",showIndicators:a=!0,showNavigation:i=!0,autoPlay:o=!1,autoPlayInterval:m=3e3})=>{const[b,h]=l.useState(0),[c,p]=l.useState(!1),w=l.useCallback(()=>{h(g=>g===0?t.length-1:g-1)},[t.length]),S=l.useCallback(()=>{h(g=>g===t.length-1?0:g+1)},[t.length]),f=l.useCallback(g=>{h(g)},[]);return X.useEffect(()=>{if(o&&!c&&t.length>1){const g=setInterval(()=>{S()},m);return()=>clearInterval(g)}},[o,c,t.length,m,S]),!t||t.length===0?e.jsx("div",{className:`flex h-full w-full items-center justify-center bg-black/[0.02] ${n}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-black/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"mt-2 block text-sm text-black/40",children:"No Image"})]})}):t.length===1?e.jsx("div",{className:`relative flex items-center justify-center ${n}`,children:e.jsx("img",{src:t[0],alt:r,className:"h-full w-full object-contain",onError:g=>{const u=g.target;u.style.display="none";const y=u.parentElement;if(y&&!y.querySelector(".image-fallback")){const j=document.createElement("div");j.className="image-fallback flex h-full w-full items-center justify-center bg-black/[0.02]",j.innerHTML='<span class="text-sm text-black/40">No Image</span>',y.appendChild(j)}}})}):e.jsxs("div",{className:`relative overflow-hidden ${n}`,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsx("div",{className:"relative flex h-full w-full items-center justify-center",children:t.map((g,u)=>e.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-300 ${u===b?"opacity-100":"opacity-0"}`,children:e.jsx("img",{src:g,alt:`${r} - Image ${u+1}`,className:"h-full w-full object-contain",onError:y=>{const j=y.target;j.style.display="none";const C=j.parentElement;if(C&&!C.querySelector(".image-fallback")){const N=document.createElement("div");N.className="image-fallback flex h-full w-full items-center justify-center bg-black/[0.02]",N.innerHTML='<span class="text-sm text-black/40">No Image</span>',C.appendChild(N)}}})},u))}),i&&t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:w,className:`absolute left-3 top-1/2 -translate-y-1/2 z-10 rounded-full bg-white/90 shadow-lg p-2.5 text-gray-700 transition-all hover:bg-white hover:shadow-xl hover:scale-110 ${c?"opacity-100":"opacity-0"}`,"aria-label":"Previous image",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{type:"button",onClick:S,className:`absolute right-3 top-1/2 -translate-y-1/2 z-10 rounded-full bg-white/90 shadow-lg p-2.5 text-gray-700 transition-all hover:bg-white hover:shadow-xl hover:scale-110 ${c?"opacity-100":"opacity-0"}`,"aria-label":"Next image",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),a&&t.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex gap-2",children:t.map((g,u)=>e.jsx("button",{type:"button",onClick:()=>f(u),className:`rounded-full transition-all ${u===b?"h-2 w-8 bg-white shadow-md":"h-2 w-2 bg-white/60 hover:bg-white/80"}`,"aria-label":`Go to image ${u+1}`},u))})]})},_e=({product:t,quantity:r,onClose:n,onQuantityChange:a,onAddToCart:i})=>{if(!t)return null;const o=t.stock===0,m=t.attributes.Package||"",b=t.attributes.PricePerUnit||"",c=["Fiber","Fat","Potassium","Calories","Protein","Carbs"].filter(p=>t.attributes[p]).map(p=>({label:p,value:t.attributes[p]}));return e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/50 p-4 overflow-y-auto",onClick:n,style:{paddingTop:"2rem",paddingBottom:"2rem"},children:e.jsxs("div",{className:"relative w-full max-w-2xl max-h-[calc(100vh-4rem)] rounded-2xl bg-white shadow-xl my-auto flex flex-col overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:n,className:"absolute right-4 top-4 z-10 flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-blue-600 transition-colors hover:bg-white","aria-label":"Close modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"relative w-full bg-gradient-to-b from-gray-50 to-white flex-shrink-0",children:e.jsx("div",{className:"aspect-square w-full max-h-[400px] mx-auto",children:e.jsx(re,{images:t.imageUrls&&t.imageUrls.length>0?t.imageUrls:t.imageUrl&&t.imageUrl.trim()!==""?[t.imageUrl]:[],alt:t.name,className:"h-full w-full",showIndicators:!0,showNavigation:!0,autoPlay:!1})})}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.sellerName&&e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-50 text-blue-700 font-semibold",children:t.sellerName}),t.brand&&t.brand.trim()!==""&&e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-700 font-medium",children:t.brand})]}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-900",children:["$",t.price.toFixed(2)]}),e.jsx("h2",{className:"mt-1 text-2xl font-semibold text-slate-900",children:t.name})]}),e.jsx("p",{className:"mb-4 text-sm leading-relaxed text-black/70",children:t.description}),(m||b)&&e.jsxs("p",{className:"mb-4 text-sm text-black/60",children:[m&&e.jsx("span",{children:m}),m&&b&&e.jsx("span",{children:" • "}),b&&e.jsx("span",{children:b})]}),t.features&&t.features.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold text-slate-900",children:"Features"}),e.jsx("ul",{className:"space-y-1.5",children:t.features.map((p,w)=>e.jsxs("li",{className:"flex items-start text-sm text-black/70",children:[e.jsx("svg",{className:"mr-2 mt-0.5 h-4 w-4 flex-shrink-0 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:p})]},w))})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center rounded-full bg-black/[0.04] px-2 py-1.5 border border-gray-200",children:[e.jsx("button",{type:"button",className:`flex h-8 w-8 items-center justify-center rounded-full transition-colors ${r===0||o?"opacity-30 cursor-not-allowed":"opacity-50 hover:bg-slate-200 hover:opacity-100"}`,"aria-label":"Decrease quantity",onClick:()=>a(-1),disabled:r===0||o,children:e.jsx("span",{className:"text-lg font-medium text-slate-900",children:"−"})}),e.jsx("span",{className:"min-w-[32px] px-2 text-center text-base font-semibold text-slate-900",children:r}),e.jsx("button",{type:"button",className:`flex h-8 w-8 items-center justify-center rounded-full transition-colors ${r>=t.stock||o?"opacity-30 cursor-not-allowed":"opacity-50 hover:bg-slate-200 hover:opacity-100"}`,"aria-label":"Increase quantity",onClick:()=>a(1),disabled:r>=t.stock||o,children:e.jsx("span",{className:"text-lg font-medium text-slate-900",children:"+"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&i&&e.jsx("button",{type:"button",onClick:i,className:"bg-black text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-black/90 transition-colors text-base",children:"Agregar al Carrito"}),o&&e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Out of Stock"})]})]}),c.length>0&&e.jsx("div",{className:"mb-4 border-t border-black/5 pt-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:c.map(({label:p,value:w})=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:w}),e.jsx("p",{className:"text-xs text-black/60",children:p})]},p))})}),t.description&&t.description.length>100&&e.jsx("p",{className:"text-sm leading-relaxed text-black/60",children:t.description.split(".").slice(1).join(".").trim()})]})]})})},De={DEV:!1,MODE:"production"},U=typeof import.meta<"u"?De:void 0,Pe=!!(U!=null&&U.DEV),ze=typeof navigator<"u"&&/(jsdom|happy-dom)/i.test(navigator.userAgent)||typeof globalThis.happyDOM=="object",le=(U==null?void 0:U.MODE)==="test"||ze,Fe=typeof window<"u",ie=typeof document<"u",Oe=Fe&&ie,Ue=t=>{const r=t.currentTarget;if(!(r instanceof HTMLElement))return;const n=r.offsetWidth;let a=.985;n<=80?a=.96:n<=150?a=.97:n<=220?a=.98:n>600&&(a=.995),r.style.setProperty("--scale",a.toString())},te=(t,r)=>{const n=()=>{const m=setTimeout(t);return()=>{clearTimeout(m)}};if(!Oe||typeof window.requestAnimationFrame!="function"||ie&&document.visibilityState==="hidden")return n();let i=2,o=window.requestAnimationFrame(function m(){i-=1,i===0?t():o=window.requestAnimationFrame(m)});return()=>{typeof window.cancelAnimationFrame=="function"&&window.cancelAnimationFrame(o)}},We=t=>Object.keys(t).reduce((n,a)=>{const i=t[a];if(i||i===0){const o=a.startsWith("--")?"":"--",m=typeof i=="number"?`${i}px`:i;n[`${o}${a}`]=m}return n},{}),qe=t=>{const r=l.Children.toArray(t),n=[];let a="";const i=()=>{a!==""&&(n.push(a),a="")};for(const o of r)if(!(o==null||typeof o=="boolean")){if(typeof o=="string"||typeof o=="number"){a+=String(o);continue}i(),n.push(o)}return i(),n},oe=t=>{const r=qe(t),n=l.Children.count(r);return l.Children.map(r,a=>{if(typeof a=="string"&&a.trim())return n<=1?a:e.jsx("span",{children:a});if(l.isValidElement(a)){const i=a,{children:o,...m}=i.props;return o!=null?l.cloneElement(i,m,oe(o)):i}return a})};l.createContext(null);var He=typeof Q=="object"&&Q&&Q.Object===Object&&Q,Ge=typeof self=="object"&&self&&self.Object===Object&&self;He||Ge||Function("return this")();var Qe=typeof window<"u"?l.useLayoutEffect:l.useEffect;function Ve(t,r){const n=l.useRef(t);Qe(()=>{n.current=t},[t]),l.useEffect(()=>{if(!r&&r!==0)return;const a=setTimeout(()=>{n.current()},r);return()=>{clearTimeout(a)}},[r])}const Ke="_LoadingIndicator_7yl6f_1",Je={LoadingIndicator:Ke},Xe=({className:t,size:r,strokeWidth:n,style:a,...i})=>e.jsx("div",{...i,className:D(Je.LoadingIndicator,t),style:a||We({"indicator-size":r,"indicator-stroke":n})});function Ye(t){return r=>{t.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}const Ze=()=>le,se=(t,r=!1,n="TransitionGroup")=>{const a=[];return l.Children.forEach(t,i=>{if(i&&typeof i=="object"&&"key"in i&&i.key)a.push(i);else if(r)throw new Error(`Child elements of <${n} /> must include a \`key\``)}),a},F=()=>{},O=t=>{const r=l.useRef(t);return r.current=t,l.useCallback(n=>r.current(n),[])};function et(t,r,n,a){const i=t.reduce((h,c)=>({...h,[c.key]:1}),{}),o=r.reduce((h,c)=>({...h,[c.component.key]:1}),{}),m=t.filter(h=>!o[h.key]).map(n),b=r.map(h=>({...h,component:t.find(({key:c})=>c===h.component.key)||h.component,shouldRender:!!i[h.component.key]}));return a==="append"?b.concat(m):m.concat(b)}function tt(t,r,n){if((le||Pe)&&r&&n>1)throw new Error(`Cannot use forwardRef with multiple children in <${t} />`)}const st="_TransitionGroupChild_1hv1z_1",nt={TransitionGroupChild:st},ce={enter:!1,enterActive:!1,exit:!1,exitActive:!1,interrupted:!1},at=t=>({...ce,enter:!t}),rt=(t,r)=>{switch(r.type){case"enter-before":return{enter:!0,enterActive:!1,exit:!1,exitActive:!1,interrupted:t.interrupted||t.exit};case"enter-active":return{enter:!0,enterActive:!0,exit:!1,exitActive:!1,interrupted:!1};case"exit-before":return{enter:!1,enterActive:!1,exit:!0,exitActive:!1,interrupted:t.interrupted||t.enter};case"exit-active":return{enter:!1,enterActive:!1,exit:!0,exitActive:!0,interrupted:!1};case"done":default:return ce}},lt=({ref:t,as:r,children:n,className:a,transitionId:i,style:o,preventMountTransition:m,shouldRender:b,enterDuration:h,exitDuration:c,removeChild:p,onEnter:w,onEnterActive:S,onEnterComplete:f,onExit:g,onExitActive:u,onExitComplete:y})=>{const[j,C]=l.useReducer(rt,at(m||!1)),N=l.useRef(!1),L=l.useRef(null),A=l.useRef(h);A.current=h;const v=l.useRef(c);v.current=c;const $=l.useRef(null),T=l.useCallback(R=>{const I=L.current;if(!(!I||R===$.current))switch($.current=R,R){case"enter":w(I);break;case"enter-active":S(I);break;case"enter-complete":f(I);break;case"exit":g(I);break;case"exit-active":u(I);break;case"exit-complete":y(I);break}},[w,S,f,g,u,y]);return X.useLayoutEffect(()=>{if(!b){let B;C({type:"exit-before"}),T("exit");const P=te(()=>{C({type:"exit-active"}),T("exit-active"),B=window.setTimeout(()=>{T("exit-complete"),p()},v.current)});return()=>{P(),B!==void 0&&clearTimeout(B)}}if(m&&!N.current){N.current=!0;return}let R;C({type:"enter-before"}),T("enter");const I=te(()=>{C({type:"enter-active"}),T("enter-active"),R=window.setTimeout(()=>{C({type:"done"}),T("enter-complete")},A.current)});return()=>{I(),R!==void 0&&clearTimeout(R)}},[b,m,p,T]),l.useEffect(()=>()=>{N.current=!1},[]),e.jsx(r,{ref:Ye([L,t]),className:D(a,nt.TransitionGroupChild),"data-transition-id":i,style:o,"data-entering":j.enter?"":void 0,"data-entering-active":j.enterActive?"":void 0,"data-exiting":j.exit?"":void 0,"data-exiting-active":j.exitActive?"":void 0,"data-interrupted":j.interrupted?"":void 0,children:n})},it=t=>{const{enterMountDelay:r,preventMountTransition:n}=t,a=!n&&r!=null?r:null,[i,o]=l.useState(a==null);return Ve(()=>o(!0),i?null:a),i?e.jsx(lt,{...t}):null},ot=t=>{const{ref:r,as:n="span",children:a,className:i,transitionId:o,style:m,enterDuration:b=0,exitDuration:h=0,preventInitialTransition:c=!0,enterMountDelay:p,insertMethod:w="append",disableAnimations:S=Ze()}=t,f=O(t.onEnter??F),g=O(t.onEnterActive??F),u=O(t.onEnterComplete??F),y=O(t.onExit??F),j=O(t.onExitActive??F),C=O(t.onExitComplete??F);l.Children.forEach(a,v=>{if(v&&!v.key)throw new Error("Child elements of <TransitionGroup /> must include a `key`")});const N=l.useCallback(v=>({component:v,shouldRender:!0,removeChild:()=>{A($=>$.filter(T=>v.key!==T.component.key))},onEnter:f,onEnterActive:g,onEnterComplete:u,onExit:y,onExitActive:j,onExitComplete:C}),[f,g,u,y,j,C]),[L,A]=l.useState(()=>se(a).map(v=>({...N(v),preventMountTransition:c})));return l.useLayoutEffect(()=>{A(v=>{const $=se(a);return et($,v,N,w)})},[a,w,N]),tt("TransitionGroup",r,l.Children.count(a)),S?e.jsx(e.Fragment,{children:l.Children.map(a,v=>e.jsx(n,{ref:r,className:i,style:m,"data-transition-id":o,children:v}))}):e.jsx(e.Fragment,{children:L.map(({component:v,...$})=>e.jsx(it,{...$,as:n,className:i,transitionId:o,enterDuration:b,exitDuration:h,enterMountDelay:p,style:m,ref:r,children:v},v.key))})},ct="_Button_1864l_1",dt="_ButtonInner_1864l_4",ut="_ButtonLoader_1864l_749",J={Button:ct,ButtonInner:dt,ButtonLoader:ut},mt=t=>{const{type:r="button",color:n="primary",variant:a="solid",pill:i=!0,uniform:o=!1,size:m="md",iconSize:b,gutterSize:h,loading:c,selected:p,block:w,opticallyAlign:S,children:f,className:g,onClick:u,disabled:y,disabledTone:j,inert:C=c,...N}=t,L=y||C,A=l.useCallback(v=>{y||u==null||u(v)},[u,y]);return e.jsxs("button",{type:r,className:D(J.Button,g),"data-color":n,"data-variant":a,"data-pill":i?"":void 0,"data-uniform":o?"":void 0,"data-size":m,"data-gutter-size":h,"data-icon-size":b,"data-loading":c?"":void 0,"data-selected":p?"":void 0,"data-block":w?"":void 0,"data-optically-align":S,onPointerEnter:Ue,disabled:L,"aria-disabled":L,tabIndex:L?-1:void 0,"data-disabled":y?"":void 0,"data-disabled-tone":y?j:void 0,onClick:A,...N,children:[e.jsx(ot,{className:J.ButtonLoader,enterDuration:250,exitDuration:150,children:c&&e.jsx(Xe,{},"loader")}),e.jsx("span",{className:J.ButtonInner,children:oe(f)})]})},xt=({cartItems:t,onClose:r,onCheckout:n,onRemoveItem:a,onUpdateQuantity:i})=>{const o=t.reduce((c,p)=>c+p.totalPrice,0),m=o*.1,b=o>50?0:5.99,h=o+m+b;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/50 p-4 overflow-y-auto",onClick:r,style:{paddingTop:"2rem",paddingBottom:"2rem"},children:e.jsxs("div",{className:"relative w-full max-w-2xl max-h-[calc(100vh-4rem)] rounded-2xl bg-white shadow-xl my-auto flex flex-col overflow-hidden",onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-black/10 bg-white",children:[e.jsx("h2",{className:"text-2xl font-bold text-black",children:"Carrito de Compras"}),e.jsx("button",{onClick:r,className:"flex h-8 w-8 items-center justify-center rounded-full bg-black/5 text-black/70 transition-colors hover:bg-black/10 hover:text-black","aria-label":"Close modal",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("svg",{className:"h-16 w-16 text-black/20 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"text-lg font-medium text-black/60",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-sm text-black/40 mt-1",children:"Agrega productos para comenzar"})]}):e.jsx("div",{className:"space-y-4",children:t.map(c=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 p-4 rounded-lg border border-black/5 bg-white",children:[e.jsx("div",{className:"relative h-24 w-24 sm:h-20 sm:w-20 flex-shrink-0 overflow-hidden rounded-lg bg-black/[0.02]",children:c.imageUrl&&c.imageUrl.trim()!==""?e.jsx("img",{src:c.imageUrl,alt:c.productName,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8 text-black/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.sellerName&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-50 text-blue-700 font-semibold",children:c.sellerName}),c.brand&&c.brand.trim()!==""&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-700 font-medium",children:c.brand})]}),e.jsx("h3",{className:"text-lg font-bold text-black mb-2 break-words",children:c.productName}),e.jsxs("p",{className:"text-sm text-black/60 mb-2",children:["SKU: ",c.productSku]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("p",{className:"text-lg font-bold text-black",children:["$",c.unitPrice.toFixed(2)]}),e.jsx("p",{className:"text-sm text-black/60",children:"c/u"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto justify-between sm:justify-end",children:[e.jsxs("div",{className:"flex items-center rounded-full bg-black/[0.04] px-3 py-1.5 border border-gray-200",children:[e.jsx("button",{type:"button",className:"flex h-7 w-7 items-center justify-center rounded-full transition-colors opacity-50 hover:bg-slate-200 hover:opacity-100","aria-label":"Decrease quantity",onClick:()=>i(c.productId,-1),children:e.jsx("span",{className:"text-base font-medium text-slate-900",children:"−"})}),e.jsx("span",{className:"min-w-[32px] px-3 text-center text-base font-bold text-slate-900",children:c.quantity}),e.jsx("button",{type:"button",className:"flex h-7 w-7 items-center justify-center rounded-full transition-colors opacity-50 hover:bg-slate-200 hover:opacity-100","aria-label":"Increase quantity",onClick:()=>i(c.productId,1),children:e.jsx("span",{className:"text-base font-medium text-slate-900",children:"+"})})]}),e.jsxs("div",{className:"text-right min-w-[80px]",children:[e.jsxs("p",{className:"text-xl font-bold text-black",children:["$",c.totalPrice.toFixed(2)]}),e.jsx("p",{className:"text-xs text-black/60 font-medium",children:"Total"})]}),e.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center rounded-full text-black/40 transition-colors hover:bg-red-50 hover:text-red-600 flex-shrink-0","aria-label":"Remove item",onClick:()=>a(c.productId),children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},c.productId))})}),t.length>0&&e.jsxs("div",{className:"border-t border-black/5 p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-black/70",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",o.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-black/70",children:[e.jsx("span",{children:"Impuesto"}),e.jsxs("span",{children:["$",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-black/70",children:[e.jsx("span",{children:"Envío"}),e.jsx("span",{children:b===0?"Gratis":`$${b.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold text-black pt-2 border-t border-black/10",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",h.toFixed(2)]})]})]}),e.jsx(mt,{color:"primary",variant:"solid",size:"lg",className:"w-full",onClick:n,children:"Comprar"})]})]})})},ht=()=>({selectedCategory:"All",selectedBrand:"All",minPrice:void 0,maxPrice:void 0,quantities:{},cartItems:[]}),ft=()=>{var Z,ee;const t=Ne()??void 0,r=Ce(),n=we(()=>({})),[a,i]=Me(ht),o=l.useMemo(()=>{const s=n&&"structuredContent"in n?n.structuredContent:n;return(s==null?void 0:s.products)??(n==null?void 0:n.products)??[]},[n]),m=l.useMemo(()=>{const s=n&&"structuredContent"in n?n.structuredContent:n;return(s==null?void 0:s.status)??(n==null?void 0:n.status)??"loading"},[n]);l.useEffect(()=>{m==="completed"&&n&&Object.keys(n).length>0?I(!1):m==="loading"&&I(!0)},[m,n]);const b=l.useMemo(()=>{var s;return(a==null?void 0:a.selectedCategory)??((s=n==null?void 0:n.widgetState)==null?void 0:s.selectedCategory)??"All"},[a==null?void 0:a.selectedCategory,(Z=n==null?void 0:n.widgetState)==null?void 0:Z.selectedCategory]),h=l.useMemo(()=>{var s;return(a==null?void 0:a.quantities)??((s=n==null?void 0:n.widgetState)==null?void 0:s.quantities)??{}},[a==null?void 0:a.quantities,(ee=n==null?void 0:n.widgetState)==null?void 0:ee.quantities]),[c,p]=l.useState(b),[w,S]=l.useState("All"),[f,g]=l.useState(void 0),[u,y]=l.useState(void 0),[j,C]=l.useState(h),[N,L]=l.useState({}),[A,v]=l.useState(null),[$,T]=l.useState(!1),[R,I]=l.useState(!0),B=l.useMemo(()=>{const s=[];return Object.entries(j).forEach(([d,x])=>{if(x>0){const k=o.find(_=>_.id===d);k&&s.push({productId:k.id,productName:k.name,productSku:k.sku,quantity:x,unitPrice:k.price,totalPrice:k.price*x,imageUrl:k.imageUrl})}}),s},[j,o]),P=l.useMemo(()=>B.reduce((s,d)=>s+d.quantity,0),[B]);l.useEffect(()=>{p(s=>s===b?s:b)},[b]),l.useEffect(()=>{C(s=>{const d=JSON.stringify(s),x=JSON.stringify(h);return d===x?s:h})},[h]);const de=l.useMemo(()=>{var d;const s=(d=window.openai)==null?void 0:d.initialData;return s!=null&&s.categories&&Array.isArray(s.categories)&&s.categories.length>0?["All",...s.categories]:["All",...Array.from(new Set(o.map(x=>x.category)))]},[o]),ue=l.useMemo(()=>{var d;const s=(d=window.openai)==null?void 0:d.initialData;return s!=null&&s.brands&&Array.isArray(s.brands)&&s.brands.length>0?["All",...s.brands]:["All",...Array.from(new Set(o.map(x=>x.brand).filter(x=>x&&x.trim()!=="")))]},[o]),M=l.useMemo(()=>{if(o.length===0)return[0,1e3];const s=o.map(k=>k.price),d=Math.floor(Math.min(...s)),x=Math.ceil(Math.max(...s));return[d,x]},[o]);l.useEffect(()=>{f===void 0&&u===void 0&&M[0]!==M[1]&&(g(M[0]),y(M[1]))},[M,f,u]);const W=l.useMemo(()=>{let s=o;return c!=="All"&&(s=s.filter(d=>d.category===c)),w!=="All"&&(s=s.filter(d=>d.brand===w)),f!==void 0&&(s=s.filter(d=>d.price>=f)),u!==void 0&&(s=s.filter(d=>d.price<=u)),s},[o,c,w,f,u]),H=l.useCallback((s,d)=>{L(x=>{const k=x[s]||0,_=o.find(G=>G.id===s),V=Math.max(0,Math.min(k+d,(_==null?void 0:_.stock)||0));return{...x,[s]:V}})},[o]),z=l.useCallback((s,d)=>{C(x=>{const k=x[s]||0,_=o.find(K=>K.id===s),V=Math.max(0,Math.min(k+d,(_==null?void 0:_.stock)||0)),G={...x,[s]:V};return i(K=>({...K,quantities:G})),G})},[o,i]),me=l.useCallback(s=>{p(s),i(d=>({...d,selectedCategory:s}))},[i]),xe=l.useCallback(s=>{S(s),i(d=>({...d,selectedBrand:s}))},[i]),he=l.useCallback(s=>{const d=Math.min(s,u??M[1]);g(d),i(x=>({...x,minPrice:d}))},[u,M,i]),fe=l.useCallback(s=>{const d=Math.max(s,f??M[0]);y(d),i(x=>({...x,maxPrice:d}))},[f,M,i]),be=l.useCallback(s=>{v(s)},[]),pe=l.useCallback(()=>{v(null)},[]),ge=l.useCallback(s=>{A&&H(A.id,s)},[A,H]),Y=l.useCallback(s=>{const d=N[s]||0;d>0&&(z(s,d),L(x=>{const k={...x};return delete k[s],k}))},[N,z]),je=l.useCallback(s=>{z(s,-j[s]||0)},[j,z]),ve=l.useCallback((s,d)=>{z(s,d)},[z]),ke=l.useCallback(()=>{console.log("Checkout with items:",B),alert(`Checkout initiated with ${P} items!`),T(!1)},[B,P]);return e.jsxs("div",{className:"w-full bg-white flex flex-col",style:{maxHeight:t,height:r==="fullscreen"?t:void 0,overflow:"hidden"},children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3.5 bg-white border-b border-black/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-lg font-bold text-black",children:"Catálogo"}),W.length>0&&e.jsxs("span",{className:"text-sm text-black/50",children:["(",W.length," ",W.length===1?"producto":"productos",")"]})]}),e.jsxs("button",{onClick:()=>T(!0),className:"relative flex items-center gap-2 px-4 py-2 rounded-lg bg-black/[0.06] text-black/80 hover:bg-black/[0.10] transition-all shadow-sm hover:shadow",children:[e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{className:"text-sm font-semibold",children:"Carrito"}),P>0&&e.jsx("span",{className:"absolute -top-1.5 -right-1.5 flex h-5 w-5 items-center justify-center rounded-full bg-blue-600 text-xs font-bold text-white shadow-md",children:P>99?"99+":P})]})]}),e.jsx("div",{className:"px-5 py-4 bg-gradient-to-b from-white to-black/[0.02] border-b border-black/10",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-start",children:[e.jsxs("div",{className:"flex-1 min-w-[160px]",children:[e.jsx("label",{className:"block text-xs font-bold text-black/80 mb-2 uppercase tracking-wider",children:"Categoría"}),e.jsx("select",{value:c,onChange:s=>me(s.target.value),className:"w-full px-4 py-2.5 text-sm font-medium border-2 border-black/15 rounded-lg bg-white text-black shadow-sm hover:border-black/30 focus:outline-none focus:ring-2 focus:ring-black/15 focus:border-black/40 transition-all appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23374151' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.25em 1.25em",paddingRight:"2.75rem"},children:de.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"flex-1 min-w-[160px]",children:[e.jsx("label",{className:"block text-xs font-bold text-black/80 mb-2 uppercase tracking-wider",children:"Marca"}),e.jsx("select",{value:w,onChange:s=>xe(s.target.value),className:"w-full px-4 py-2.5 text-sm font-medium border-2 border-black/15 rounded-lg bg-white text-black shadow-sm hover:border-black/30 focus:outline-none focus:ring-2 focus:ring-black/15 focus:border-black/40 transition-all appearance-none cursor-pointer",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23374151' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.75rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.25em 1.25em",paddingRight:"2.75rem"},children:ue.map(s=>e.jsx("option",{value:s,children:s},s))})]}),f!==void 0&&u!==void 0&&e.jsxs("div",{className:"flex-1 min-w-[240px]",children:[e.jsx("label",{className:"block text-xs font-bold text-black/80 mb-3 uppercase tracking-wider",children:"Rango de Precios"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2.5",children:[e.jsx("span",{className:"text-xs font-semibold text-black/70",children:"Mínimo"}),e.jsxs("span",{className:"text-base font-bold text-black",children:["$",f.toFixed(2)]})]}),e.jsx("input",{type:"range",value:f,min:M[0],max:u,step:1,onChange:s=>he(Number(s.target.value)),className:"w-full h-2 bg-black/10 rounded-full appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #000 0%, #000 ${(f-M[0])/(u-M[0])*100}%, rgba(0,0,0,0.1) ${(f-M[0])/(u-M[0])*100}%, rgba(0,0,0,0.1) 100%)`}})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2.5",children:[e.jsx("span",{className:"text-xs font-semibold text-black/70",children:"Máximo"}),e.jsxs("span",{className:"text-base font-bold text-black",children:["$",u.toFixed(2)]})]}),e.jsx("input",{type:"range",value:u,min:f,max:M[1],step:1,onChange:s=>fe(Number(s.target.value)),className:"w-full h-2 bg-black/10 rounded-full appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #000 0%, #000 ${(u-f)/(M[1]-f)*100}%, rgba(0,0,0,0.1) ${(u-f)/(M[1]-f)*100}%, rgba(0,0,0,0.1) 100%)`}})]})]})]})]})}),e.jsx("section",{className:"flex-1 overflow-y-auto p-5 bg-gradient-to-b from-white to-black/[0.01]",children:R||m==="completed"&&o.length===0&&(!n||Object.keys(n).length===0)?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[...Array(6)].map((s,d)=>e.jsxs("div",{className:"group relative flex flex-col overflow-hidden rounded-xl border-2 border-black/8 bg-white animate-pulse",children:[e.jsx("div",{className:"relative h-64 w-full bg-gray-200"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-3.5 px-5 pt-4 pb-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("div",{className:"h-5 w-16 bg-gray-200 rounded"})}),e.jsx("div",{className:"h-6 w-3/4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-7 w-24 bg-gray-200 rounded"})]}),e.jsx("div",{className:"h-4 w-full bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 w-5/6 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 mt-auto pt-2",children:[e.jsxs("div",{className:"flex items-center rounded-lg bg-gray-200 border border-gray-200 px-2 py-1.5",children:[e.jsx("div",{className:"h-7 w-7 bg-gray-300 rounded-md"}),e.jsx("div",{className:"min-w-[28px] px-2",children:e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded mx-auto"})}),e.jsx("div",{className:"h-7 w-7 bg-gray-300 rounded-md"})]}),e.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded-lg"})]})]})]},`skeleton-${d}`))}):m==="completed"&&o.length===0?e.jsx("div",{className:"py-16 px-4",children:e.jsxs(E,{children:[e.jsx(E.Title,{children:"No se encontraron productos"}),e.jsx(E.Description,{children:"Intenta ajustar los filtros para encontrar lo que buscas."})]})}):W.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:W.map(s=>{const d=N[s.id]||0,x=s.stock===0;return e.jsxs("article",{className:"group relative flex flex-col overflow-hidden rounded-xl border-2 border-black/8 bg-white transition-all hover:shadow-lg hover:border-black/15 cursor-pointer",onClick:()=>be(s),children:[e.jsxs("div",{className:"relative h-64 w-full overflow-hidden bg-gradient-to-b from-black/[0.02] to-transparent",children:[e.jsx(re,{images:s.imageUrls&&s.imageUrls.length>0?s.imageUrls:s.imageUrl&&s.imageUrl.trim()!==""?[s.imageUrl]:[],alt:s.name,className:"h-64 w-full",showIndicators:!0,showNavigation:!0,autoPlay:!1}),x&&e.jsx("div",{className:"absolute top-3 right-3 px-2.5 py-1 bg-red-500 text-white text-xs font-bold rounded-md shadow-md",children:"Agotado"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-3.5 px-5 pt-4 pb-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.brand&&s.brand.trim()!==""&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-700 font-medium",children:s.brand})}),e.jsx("h3",{className:"text-lg font-bold text-black leading-tight",children:s.name}),e.jsxs("p",{className:"text-xl font-bold text-black",children:["$",s.price.toFixed(2)]})]}),e.jsx("p",{className:"text-sm leading-relaxed text-black/60 line-clamp-2 min-h-[2.5rem]",title:s.description,children:s.description}),e.jsxs("div",{className:"flex items-center justify-between gap-3 mt-auto pt-2",children:[e.jsxs("div",{className:"flex items-center rounded-lg bg-black/[0.06] border border-black/10 px-2 py-1.5",children:[e.jsx("button",{type:"button",className:`flex h-7 w-7 items-center justify-center rounded-md transition-all ${d===0||x?"opacity-30 cursor-not-allowed":"hover:bg-black/10 active:scale-95"}`,"aria-label":`Decrease quantity of ${s.name}`,onClick:k=>{k.stopPropagation(),H(s.id,-1)},disabled:d===0||x,children:e.jsx("span",{className:"text-base font-bold",children:"−"})}),e.jsx("span",{className:"min-w-[28px] px-2 text-center text-sm font-bold text-black",children:d}),e.jsx("button",{type:"button",className:`flex h-7 w-7 items-center justify-center rounded-md transition-all ${d>=s.stock||x?"opacity-30 cursor-not-allowed":"hover:bg-black/10 active:scale-95"}`,"aria-label":`Increase quantity of ${s.name}`,onClick:k=>{k.stopPropagation(),H(s.id,1)},disabled:d>=s.stock||x,children:e.jsx("span",{className:"text-base font-bold",children:"+"})})]}),e.jsx("div",{className:"flex items-center gap-2",children:d>0&&e.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),Y(s.id)},className:"bg-black text-white font-semibold py-2 px-4 rounded-lg hover:bg-black/90 transition-colors text-sm shadow-sm hover:shadow-md",children:"Agregar"})})]})]})]},s.id)})}):e.jsx("div",{className:"py-16 px-4",children:e.jsxs(E,{children:[e.jsx(E.Title,{children:"No se encontraron productos"}),e.jsx(E.Description,{children:"Intenta ajustar los filtros para encontrar lo que buscas."})]})})}),A&&e.jsx(_e,{product:A,quantity:N[A.id]||0,onClose:pe,onQuantityChange:ge,onAddToCart:()=>Y(A.id)}),$&&e.jsx(xt,{cartItems:B,onClose:()=>T(!1),onCheckout:ke,onRemoveItem:je,onUpdateQuantity:ve}),e.jsx("style",{children:`
        input[type="range"].slider::-webkit-slider-thumb {
          appearance: none;
          width: 18px;
          height: 18px;
          border-radius: 50%;
          background: #000;
          cursor: pointer;
          border: 2px solid #fff;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          transition: transform 0.1s ease;
        }
        input[type="range"].slider::-webkit-slider-thumb:hover {
          transform: scale(1.1);
        }
        input[type="range"].slider::-moz-range-thumb {
          width: 18px;
          height: 18px;
          border-radius: 50%;
          background: #000;
          cursor: pointer;
          border: 2px solid #fff;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
          transition: transform 0.1s ease;
        }
        input[type="range"].slider::-moz-range-thumb:hover {
          transform: scale(1.1);
        }
        input[type="range"].slider::-ms-thumb {
          width: 18px;
          height: 18px;
          border-radius: 50%;
          background: #000;
          cursor: pointer;
          border: 2px solid #fff;
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        select {
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
        }
      `})]})};typeof window<"u"&&(window.openai=window.openai||{});const ne=document.getElementById("root");ne&&ye(ne).render(e.jsx(X.StrictMode,{children:e.jsx(ft,{})}));
